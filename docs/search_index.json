[["index.html", "卫生统计学笔记 Chapter 1 About this book", " 卫生统计学笔记 Zhoulvbang 2024-10-12 Chapter 1 About this book 这是一个用Markdown编写的 \\(\\alpha\\)=0.05的学习笔记 。您可以使用Pandoc的Markdown支持的任何内容；例如，数学方程式 \\(a^2 + b^2 = c^2\\)。 如您在需要再本地编译本文档，请浏览Usage部分。 “All knowledge is, in final analysis, history. All sciences are, in the abstact, mathematics. All judgements are, in their rationale, statistics.” “在终极的分析中，一切知识都是历史 在抽象的意义下，一切科学都是数学 在理性的基础上，所有的判断都是统计学” ——C.R. Rao Statistics And Truth "],["关于卫生统计学.html", "Chapter 2 关于卫生统计学 2.1 卫生统计学：介绍与展望", " Chapter 2 关于卫生统计学 2.1 卫生统计学：介绍与展望 2.1.1 什么是卫生统计学？ 卫生统计学是一门致力于收集、分析和解释与健康相关的数据的学科。它的目标是通过统计方法来评估和改善人群的健康状况，从而提高公共卫生水平。卫生统计学将统计学原理应用于医学和公共卫生领域，以支持健康决策的制定和实施。 2.1.2 卫生统计学的重要性 卫生统计学在以下几个方面发挥着重要作用： 疾病监测与控制： 通过收集和分析疾病发病率、死亡率和流行病学数据，卫生统计学帮助识别疾病的流行趋势，并制定相应的预防和控制策略。 健康政策制定： 卫生统计学提供了评估不同健康政策和干预措施效果的方法，为政策制定者提供了决策支持。 卫生服务评估： 通过分析卫生服务的覆盖范围、质量和效率，卫生统计学评估卫生系统的运作情况，并提供改进建议。 流行病学研究： 卫生统计学在研究人群健康与疾病之间的关系方面发挥着关键作用，帮助揭示疾病的发病机制和影响因素。 2.1.3 卫生统计学的未来展望 随着数据科学和人工智能技术的发展，卫生统计学将迎来新的机遇和挑战： 大数据与人工智能： 大数据技术使得收集、整合和分析海量的健康数据成为可能，而人工智能技术则提供了更高效、精确的数据处理和预测能力，为卫生统计学研究提供了新的方法和工具。 个性化医疗： 基于个体遗传信息和生活方式数据的个性化医疗将成为未来的发展趋势，卫生统计学将在个体化医疗决策和健康管理中发挥更加重要的作用。 跨学科合作： 卫生统计学将与流行病学、遗传学、生物信息学等学科交叉融合，形成跨学科合作的新模式，共同解决健康领域的复杂问题。 公众参与与健康促进： 卫生统计学将更加注重公众参与和社区健康促进，通过社会行为和环境因素的分析，促进健康政策的制定和实施，推动社会健康公平。 随着社会的发展和健康需求的不断变化，卫生统计学将继续发挥着重要的作用，为促进全民健康、预防疾病、改善医疗服务质量和推动卫生政策提供支持和指导。 "],["不同资料的统计描述.html", "Chapter 3 不同资料的统计描述 3.1 定量资料的描述指标 3.2 离散数据的描述指标 3.3 分类资料的描述指标 3.4 率的标准化 3.5 常见统计图", " Chapter 3 不同资料的统计描述 3.1 定量资料的描述指标 3.1.1 集中趋势指标 指标 定义→本质 表示方法 计算方法 应用条件 算术均数 先求和再平均 (1)样本均数:\\(\\bar x\\) (2)总体均数:\\(\\mu\\) (1)直接法：\\(\\bar X=\\frac{\\sum{X_{i}}}{n}\\) (2)加权法：\\(\\bar X = \\frac{\\sum{f_{i}X_{i}}}{\\sum{f}}\\)，（\\(X\\)为组中值，\\(f\\)为频数） (1)对称分布，尤其是正态分布 (2)不含极端值 几何均数 先乘积再开方 \\(G\\) (1)直接法：\\(G=\\sqrt[n]{x_{1}·x_{2}·x_{3}\\cdots}x_{n}\\) (2)加权法：\\(G=\\ln^{-1}(\\frac{\\sum{f_{i}\\ln X_{i}}}{\\sum{f_{i}}})\\) (1)数据呈倍数变化或对数正态分布→正偏态分布 (2)观察值中不能有零且不能同时有正数和负数→对数性质 中位数 从小到大找中间 还要注意奇偶性 \\(M\\) (1)直接法：n为奇数，\\(M=X_{\\frac{n+1}{x}}\\) n为偶数，\\(M=\\frac{1}{2} (X_{\\frac{n}{2}}+X_{\\frac{n}{2}+1})\\) (2)加权法：百分位数法\\(P_{X}=L_{X}+\\frac{i}{f_{x}}(nX\\%-\\sum{f_{i}})\\) 任何资料 众数 出现次数最多 \\ (1)直接法：一组数据中出现次数最多的数值 加权法：f最多的组段的组中值\\(X\\) 任何数据 3.1.2 均数、中位数和众数大小的关系变化 对称分布：算术均数\\(\\approx\\)中位数 右偏态：算术均数\\(&gt;\\)中位数 左偏态：算术均数\\(&lt;\\)中位数 3.2 离散数据的描述指标 3.2.1 离散趋势指标 指标 本质→定义 表示方式 计算公式 适用条件 极差 \\(X_{Max}-X_{Min}\\) \\(R\\) 四分位间距/范围 位置指标 \\(IQR\\) \\(IQR=P_{75}-P_{25}\\) 任何资料 方差 离均差平方和求平均 样本：\\(s^{2}\\) 总体：\\(\\sigma^{2}\\) \\(s^{2}=\\frac{\\sum(x_{i}-x)^2}{(n-1)}\\) 对称分布，尤其是正态分布;不含极端值 标准差 方差开根号 样本：\\(s\\) 总体：\\(\\sigma\\) \\(s=\\sqrt{\\frac{\\sum(x_{i}-x)^2}{(n-1)}}\\) 同上 变异系数 测量数据变异程度的相对统计量 \\(CV\\) \\(CV=\\frac{s}{\\bar x}×100%\\) (1)单位相同：但均数相差悬殊；(2)单位不同 3.2.2 标准差（standard deviation）的计算 直接法 \\[s=\\sqrt{\\frac{\\sum\\limits_{i=1}^nx_i^2-\\frac{\\left(\\sum\\limits_{i=1}^nx_i\\right)^2}{n}}{n-1}}\\] 加权法：与讨算均数的方法类似，对频数表资料采用加权法，讨算公式为 \\[s=\\sqrt{\\frac{\\sum\\limits_{k=1}^gf_kx_{mk}^2-\\left(\\sum\\limits_{k=1}^gf_kx_{mk}\\right)^2 \\left(\\sum\\limits_{k=1}^gf_k\\right)}{\\sum\\limits_{k=1}^gf_k-1}}\\] 3.3 分类资料的描述指标 3.3.1 分类资料的统计描述指标 指标 相对比 构成比 频率型指标 强度性指标 定义 两个有关联的指标之比 某一部分与总体之比 某时期内累计出现的频率 单位时间内某件事发生的频率 计算公式 \\(\\frac{A指标}{B指标}\\) \\(\\frac{某一事物总体中某一部分}{某一事物所有组成部分的总体}×100\\%\\) \\(\\frac{同时期实际发生某现象的观察单位数}{某时期可能发生某现象的观察单位总数}×K\\) \\(\\frac{发生某件事的观察单位数}{\\sum(观察单位×观察时间)}×K\\) 量纲 可有可无 一般无量纲 无 有 取值 没有限制 [0,1] [0,1] 可大于1 举例 RR,变异系数CV 死因构成比 病死率，累计发病率 发病率，发病密度 3.3.2 动态数列 绝对量指标 累计增长量 逐年增长量 定基类指标 定基发展速度 定基增长速度 环比类指标 环比发展速度 环比增长速度 平均类指标 平均发展速度 平均增长速度 3.3.3 应用相对数的注意事项 频率型指标的解释要紧扣总体和属性 计算相对数分母应该有足够的观察单位数 -如果观察例数太少，则相对数波动较大 若因实际因素，观察例数确实过少，建议直接采用绝对数 正确计算合计率：分子分母分别相加，再求合计率 不能用结构相对数代替强度相对数，不能混淆频率型指标和强度型指标，不能以比代率 注意资料的可比性 不能仅用样本率比较，因为样本和总体之间存在抽样误差，需要进行假设检验推断总体的情况 3.4 率的标准化 指标 参照人数 目标人群 过程 直接标化法 人口构成 率 各年龄组期望死亡数→期望死亡合计数→直接标化率 简介标化法 率 人口构成 各年龄组期望死亡数→期望死亡合计数→变化死亡比→间接标化率 notice： 变化标化比\\(SMR=\\frac{实际死亡人数}{期望死亡人数}\\) 直接标准化选择的标准是：各年龄组标准人口构成比或各年龄组标准人口数 3.5 常见统计图 3.5.1 资料类型 连续型变量 计量资料 定量资料 离散型变量 不具有分类性质的资料 离散型定量资料 分类资料 有序分类资料 等级资料 半定量资料 无序分类资料 名义变量 notice：一般来说，统计图的选择，是综合考量了变量取值特点+研究目的。 3.5.2 统计图使用类型及目的 统计图 资料类型 分析目的 圆图和百分条图 构成比资料 用圆的扇形面积或直条各段的长度表示事物各组成部分的构成情况 直条图 相互独立资料 用直条长短表示相互独立的各指标的数值大小，一般用于比较不同组别的指标大小 直方图 连续型变量的频数分布 用矩阵面积表示各组段的频数（频率） 箱式图 连续型资料 描述数据的分布特征（包括中位数、四分位范围、最大值和最小值） 普通线图 连续型资料 用线段的升降表示某事物在时间上的变化趋势、或某一现象随着另一现象变化的情况 半对数线图 连续型资料 用线段的升降表示事物的相对变化速度 散点图 双变量连续型资料 表示两种事物变化的相关性和趋势 3.5.3 统计图的选择 Choice of Statistical Charts "],["抽样.html", "Chapter 4 抽样 4.1 常见的概率抽样 4.2 常见的非概率抽样", " Chapter 4 抽样 4.1 常见的概率抽样 类别 简单随机抽样 系统抽样 整群抽样 分层抽样 多阶段抽样 概念 将全部的观察单位编号，形成抽样框，在抽样框中随机抽取部分观察单位组成样本 先将总体的观察单位按照某一顺序分成n个部分，再从第一部分随机抽取第k号观察单位，依次用相等间隔，从每一部分各抽取一个观察单位组成样本 是以“群”为基本单位的抽样方法，先将总体分成若干群，从中随机抽取一些群，被抽中群内的全部个体组成调查的样本 先将总体中全部个体按某种特征分成若干“层”，再从每一层内随机抽取一定数量的个体组成样本 将整个抽样过程分成若干阶段进行，在初级抽样单位中抽取二级抽样单位，又在二级抽样单位中抽取三级抽样单位 优点 简单直观；均数（率）及其标准误计算简便 易于理解、简便易行；可得到按比例分配的样本；样本在总体中的分布均匀 便于组织调查；节约成本；容易控制调查质量 抽样误差相对较小；可对不同层采用不同的抽样方法；可对不同层进行独立分析 充分利用各种抽样方法的优势，克服各自的不足，并能节省人力、物力 缺点 观察单位较多，编号在实际工作中难以实现；当总体变异大时，抽样误差较分层抽样误差大 观察单位按顺序有周期趋势或递增（减）时易产生偏差 样本例数一定时，抽样误差大于简单随机抽样（因样本为广泛散布于总体中 若分层变量选择不当，层内变异较大，层间变异较小，则分层抽样失去意义 在抽样之前要掌握各级调查单位的人口资料及特点 适用范围 是其他抽样方法的基础，主要用于总体不太大的情形 主要用于按抽样顺序个体随机分布的情形 主要用于群间差异较小的情形 主要用于层间差异较大的情形 大型流行病学调查 误差大小： 整群抽样&gt;简单随机抽样&gt;系统抽样&gt;分层抽样 样本量大小：整群抽样&gt;简单随机抽样&gt;系统抽样&gt;分层抽样 概率抽样：是指每个个体被抽样抽中的概率是非零的、已知的或可计算的。 4.2 常见的非概率抽样 特点 不需要考虑等概率原则 依赖研究人员的经验和专业知识 简便易行、节约资源 结果的稳定性容易受主观影响 类别 概念 偶遇抽样 又称便利抽样，指研究者根据实际情况而采用最便利的方法来选取样本，可以抽取偶然遇到的人，或选择那些距离最近的、最容易找到的人作为调查对象 目的抽样 又称判断抽样，指研究者根据研究目标和对情况的主观判断来选择和确定调查对象的方法，是“有目的”地去选择对总体具有代表性的样本 滚雪球抽样 又称链式抽样或网络抽样，指当无法了解总体情形时，可以从能找到的少数个体入手，对他们进行调查，并请他们介绍其他符合条件的人，扩大调查面，如此重复下去直到达到所需的样本量 定额抽样 又称配额抽样，是按照总体的某种特征（年龄、性别、社会阶层等）进行分层（组），然后在每一层（组）中按照事先规定的比例或数量（即定额）用便利抽样或目的抽样的方法选取样本 空间抽样 指对具有空间关联性的各种调查对象及资源进行抽样的一种方法 "],["随机事件的概率.html", "Chapter 5 随机事件的概率 5.1 随机事件与样本空间 5.2 事件的运算 5.3 概率的定义 5.4 概率的加法公式 5.5 概率的乘法公式 5.6 全概率公式与Bayes公式", " Chapter 5 随机事件的概率 不确定的知识+所含不确定性度量的知识=可用的知识 5.1 随机事件与样本空间 确定性现象（deterministic phenomenon）：在一定条件下必然会发生的现象； 随机现象（random phenomenon）：在同一条件下具有不确定结果的现象。 对随机现象获得一个观察或进行一次测量的过程称为随机试验，简称试验，用\\(E\\)表示。 用\\(\\omega\\)表示试验\\(E\\)的一个可能的结果，则称\\(\\omega\\)为\\(E\\)的一个基本事件（elementary event）；基本事件是指不能在分解为更简单结果的事件。 5.2 事件的运算 包含关系：对任意两事件A和B，如果事件B发生，则事件A必发生，则称事件A包含事件B，记作\\(A\\supseteq B\\)或\\(B\\subseteq A\\)，符号\\(\\supseteq\\)和$ $分别表示包含与被包含。 相等关系：如果事件A和事件B满足以下关系：\\(A\\supseteq B 且B\\supseteq A\\)，则称A和B相等，记作\\(A=B\\) 事件的和：在一次试验中，对任意两事件A和B，“A和B中至少有一个发生”也是一个事件，称此事件为A和B的“和或并”，记作\\(A\\cup B\\)，也可以表示为\\(A+B\\)。 事件的交：在一次试验中，对任意两事件A和B，“A和B同时发生”也是一个事件，称此事件为A和B的“交”，记作\\(A\\cap B\\)，也可以表示为\\(AB\\)。 事件的差：在一次试验中，“A发生且B不发生”也是一个事件，称此事件为A和B的“差”，记作\\(A-B\\)。 互不相容事件：在一次试验中，“A与B不能同时发生”，即\\(A\\cup B=\\emptyset\\)，则称此事件A和事件B为互不相容事件，也称互斥事件。 对立事件：是一种特殊的互不相容事件，若“事件A与事件B不能同时发生，且他们的和组成样本空间”，即\\(A\\cap B=\\emptyset 且A\\cup B=\\Omega\\)，则称A和B互为对立事件（complementary events）。 5.3 概率的定义 频率（frequency）：设E为一随机试验，A是其中一事件，在同样条件下把E重复的做n次，以m表示事件A在这n次试验中发生的次数，则称比值\\(m/n\\)为事件A发生的频率，记为F(A)： \\[F(A)=\\frac{m}{n}\\] 概率（probability）：设在同一条件下，重复进行n次试验，随机事件A发生m次，若试验次数n无限大时，频率\\(m/n\\)将在某一确定值p的附近摆动，则称p为事件A的概率，记为P(A)： \\[P(A)=p \\approx \\frac{m}{n}\\] 概率有时也被称为相对频率方法；概率是事物固有的属性，不以人的主观意志为转移。 概率的描述性定义 概率的公理化定义： 非负性:对于任意事件A，有\\(P(A)\\geq 0\\) 规范性:\\(P(\\Omega)=1\\) 可加可列性:\\(P(\\bigcup \\limits_{i=1}^{\\infty}A_i)=\\sum \\limits_{i=1}^{\\infty}P(A_i)\\) 5.4 概率的加法公式 若A和B是样本空间\\(\\Omega\\)中两个互不相容的事件，则事件和的概率等于两事件概率之和，即： \\[P(A+B)=P(A)+P(B)\\] 这称之为概率的加法公式。此公式要求事件A和事件B互不相容。 易知，A的对立事件\\(\\bar A\\)的概率\\(P(\\bar A)=1-P(A)\\)，加法公式可自然推广到多个事件的情形。 对于任意事件A和B，即事件A和不是互不相容，更一般有： \\[P(A+B)=P(A)+P(B)-P(AB)\\] 因为当A和B互不相容时，有\\(P(AB)=0\\)。 5.5 概率的乘法公式 当存在某些可能影响结果的条件时，事件发生的概率可能会改变，我们称这种情况下的概率为条件概率。 条件概率 在已知事件A发生的条件下，事件B发生的概率成为条件概率（conditional probability），记为\\(P(B\\mid A)\\)，公式为： \\[P(B\\mid A)=\\frac{P(AB)}{P(A)},P(A)&gt;0\\] 即条件概率等于事件A和B同时发生的概率除以事件A发生的概率。 概率乘法公式 \\[P(AB)=P(A)P(B\\mid A),P(A)&gt;0\\\\ P(AB)=P(B)P(A\\mid B),P(B)&gt;0\\] 独立事件 如果事件B发生的概率不受事件A发生概率的影响，即\\(P(B\\mid A)=P(B)\\)，则称事件B对事件A独立。由于两事件间的独立总是相互的，故也有\\(P(A\\mid B)=P(A)\\)。 根据\\(P(AB)=P(B)P(A\\mid B),P(B)&gt;0\\)，若事件A、B独立，则有 \\[P(AB)=P(A)P(B)\\] 在医学研究中，可以根据试验条件及生物学知识判断事物之间的独立性。 5.6 全概率公式与Bayes公式 全概率公式 如果事件组\\(A_1,A_2,\\dots,A_n\\)满足以下两个条件： \\(A_1,A_2,\\dots,A_n\\)互不相容，且\\(P(A_i)&gt;0(i=1,2,\\dots,n)\\); \\(A_1+A_2+\\dots+A_n=\\Omega\\) 那么对于任意事件B，都有 \\[P(B)=\\sum_\\limits{i=1}^{n}P(A_i)P(B\\mid A_i)\\] 此公式成为全概率公式（total probability formula），即B的概率可以表示为在给定\\(A_i\\)发生条件下B发生的条件概率的加权平均。 Bayes公式 对于n个互不相容的事件\\(A_1,A_2,\\dots,A_n\\)，且他们的和为必然事件，则在时间B发生的前提下事件\\(A_k(k=1,2,\\dots,n)\\)发生的概率为： \\[P(A_k\\mid B)=\\frac{P(A_k)P(B\\mid A_k)}{\\sum_\\limits{i=1}^{n}P(A_i)P(B\\mid A_i)},(k=1,2,\\dots,n),P(B)&gt;0\\] Bayes公式的意义在于，它可以改变条件概率结论的方向，即在知道结果的情况下来推断原因，用式子\\(P(A_k\\mid B)\\)表示，称为后验概率(posterior probability)；而\\(P(A_k)\\)表示各种原因出现可能性的大小，一般是过去经验的总结，称为先验概率(prior probability)。 "],["离散型随机变量的概率分布.html", "Chapter 6 离散型随机变量的概率分布 6.1 二项分布(Binomial Distribution) 6.2 泊松分布(Poission Distribution) 6.3 二项分布的应用 6.4 泊松分布的应用 6.5 正态分布(Normal Distribution) 6.6 标准正态分布 6.7 小结", " Chapter 6 离散型随机变量的概率分布 type of data 6.1 二项分布(Binomial Distribution) 定义：\\(n\\)次伯努利试验，成功的次数为\\(X\\)的离散概率分布，其中每次试验的成功概率为\\(\\pi\\)，失败的概率为\\(1-\\pi\\)。 \\(X\\)的总体均数\\(\\mu_{x}=n\\pi\\) 总体方差\\(\\sigma_{x}=n\\pi(1-\\pi)\\) notice： 实际上，当\\(n=1\\)时，二项分布就是伯努利试验。 伯努利试验要求：互斥、独立、重复 Figure 6.1: Binomial Distribution with Different n/π 6.2 泊松分布(Poission Distribution) 定义：描述在单位面积、单位时间或单位空间中罕见事件发生次数的概率分布为泊松分布，记作\\(P(\\mu)\\)。泊松分布是二项分布的极限形式，当一个二项分布的\\(n\\)很大，\\(\\pi\\)很小时，此时，这个二项分布近似于泊松分布。 其总体均数与总体方差相等，记为\\(\\mu\\) 可加性：\\(X\\sim P(\\mu_{1})\\)，\\(Y\\sim P(\\mu_{2})\\)，若\\(X\\)与\\(Y\\) 独立，则\\(X+Y \\sim P(\\mu_{1}+\\mu_{1})\\) 泊松分布只有一个参数\\(\\lambda(\\mu)\\) 服从泊松分布的随机变量，其取值为\\(0\\)到\\(+\\infty\\)的概率之和为1 一般来说，当\\(\\mu \\ge20\\)时，可以认为近似正态分布 # Define the range for x x &lt;- 0:40 # Define the lambda values lambdas &lt;- c(1, 4, 10, 20) # Set up the plot area plot(x, dpois(x, lambdas[1]), type=&quot;n&quot;, ylim=c(0, max(dpois(x, lambdas))), xlab=&quot;x&quot;, ylab=&quot;Probability&quot;, main=&quot;Poisson Distribution with Different λ Values&quot;) # Plot the Poisson distributions for each lambda colors &lt;- c(&quot;blue&quot;, &quot;green&quot;, &quot;red&quot;, &quot;purple&quot;) for (i in 1:length(lambdas)) { lines(x, dpois(x, lambdas[i]), type=&quot;b&quot;, pch=19, col=colors[i]) } # Add a legend legend(&quot;topright&quot;, legend=paste(&quot;λ =&quot;, lambdas), col=colors, pch=19) Figure 6.2: Poisson Distribution with Different λ=nπ 6.3 二项分布的应用 统计描述角度：直接法计算概率 \\[ Pr(X=K)=\\frac{n!}{k!(n-k)!}\\pi^{k}(1-\\pi)^{n-k},k=0,1,2,3,\\cdots,n \\] 统计推断角度：区间估计、假设检验 6.4 泊松分布的应用 统计描述角度：直接法计算概率 \\[ Pr(X=K)=\\frac{e^{-\\mu}\\mu^{k}}{k!},k=0,1,2,\\cdots \\] 统计推断角度：区间估计、假设检验 library(ggplot2) library(cowplot) # 连续型随机变量的概率分布 6.5 正态分布(Normal Distribution) 6.5.1 正态分布的概念 若随机变量X的密度函数是 \\[f(x)=\\frac{1}{\\sqrt{2\\pi\\sigma}}e^{-\\frac{(x-\\mu)^2}{2\\sigma^2}}, (-\\infty&lt;x&lt;+\\infty)\\] 则称X服从正态分布，记为\\(X\\sim N(\\mu,\\sigma^2)\\)。 Figure 6.3: Normal Curve comparsion 正态分布(Normal Distribution)：正态分布是最重要的连续型分布，随机变量\\(X\\)服从均数为\\(\\mu\\)，标准差为\\(\\sigma\\)的正态分布，记为\\(X\\sim N(\\mu,\\sigma^{2})\\)。 正态曲线（Normal curve）：即正态分布曲线，\\(\\mu\\)和\\(\\sigma\\)是正态分布的两个参数。 Figure 6.4: Normal Curve 性质 正态曲线在横轴上方均数处最高 正态分布以均数为中心，左右对称 正态分布有两个参数，即位置参数\\(\\mu\\)和形态参数\\(\\sigma\\) 固定\\(\\sigma\\)，改变\\(\\mu\\)值，形态不变，曲线沿着\\(X\\)轴平行移动 固定\\(\\mu\\)，改变\\(\\sigma\\)值，中心在\\(X\\)轴的位置不变 \\(\\sigma\\)越小，曲线越陡峭\\(\\to\\)瘦高 \\(\\sigma\\)越大，曲线越低平\\(\\to\\)矮胖 正态分布的可加性，当随机变量X服从正态分布\\(N(\\mu_1,\\sigma_1^2)\\)，Y服从正态分布\\(N(\\mu_2,\\sigma_2^2)\\)，X与Y独立，则\\(X-Y\\)服从\\(N(\\mu_1-\\mu_2,\\sigma_1^2+\\sigma_2^2)\\)的正态分布 Figure 6.5: Different Normal Curve 6.6 标准正态分布 标准正态随机变量U的密度函数用\\(\\varphi(u)\\)表示，为： \\[\\varphi(u)=\\frac{1}{\\sqrt{2\\pi}}e^{-\\frac{u^2}{2}},(-\\infty&lt;x&lt;+\\infty)\\] 标准正态分布（Standard normal distribution）：是一种特殊的正态分布，通常用\\(U\\)或\\(Z\\)表示服从标准正态分布的变量，此时称随机变量\\(X\\)服从均数为0，标准差为1的标准正态分布，记为\\(X \\sim N(0,1)\\) 正态分布：一簇曲线 标准正态分布：一条曲线 标准正态变换：Z变换、U变换 疑难1：Z值到底表达什么意思？ 个体值到均值的距离，有多少个标准差 \\(Z = \\frac{X-\\mu}{\\sigma}\\) 只有正态分布的资料才能通过Z变换变成标准正态分布 疑难2：标准化变换的公式如何理解？ 个体值减去均值，除以标准差，均数和标准差由\\(\\mu,\\sigma\\)变为\\(0,1\\) ## TableGrob (1 x 2) &quot;arrange&quot;: 2 grobs ## z cells name grob ## 1 1 (1-1,1-1) arrange gtable[layout] ## 2 2 (1-1,2-2) arrange gtable[layout] Figure 6.6: Normalized Transformation 6.6.1 正态分布、标准正态分布的应用 正态分布的68-95-99.7法则 Figure 6.7: Normal 标准化转换，涉及到以下两个互逆计算 估计某个随机变量在一定取值范围内的观测值个数占全部观测值数量的百分比 通过已知的百分比，估计总体变量值的分布范围（本质同医学参考值范围的计算） 运用正态近似法计算医学参考值范围 Medical reference range 运用正态近似法计算置信区间 正态分布是很多统计学分析方法的理论基础 notice: 正态曲线上的拐点所对应的横坐标为\\(\\mu ±\\sigma\\)。 设随机变量\\(X\\)的概率密度曲线为\\(f(x)=\\frac{1}{2\\sqrt{p}}e^{\\frac{(x+2)^2}{4}}\\)，若要将\\(X\\)转化为服从标准正态分布的变量\\(\\mu\\)，则所采用的标准化变换为：\\(\\frac{X-2}{\\sqrt{2}}\\)（其原式为：\\(f(x)=\\frac{1}{\\sigma \\sqrt{2\\pi}}e^{\\frac{-(x-\\mu)^2}{2\\sigma^2}}\\)，题目和原式中：\\(p=\\pi\\)） 6.6.2 正负偏态分布 Figure 6.8: Skewed Curves notice： 左偏，左边尾长，平均数靠近左侧，平均数小于中位数小于众数，负偏态； 右偏，右边尾长，平均数靠近右侧，平均数大于中位数大于众数，正偏态。 6.7 小结 conversion relationship "],["由正态分布引出的三大抽样分布.html", "Chapter 7 由正态分布引出的三大抽样分布 7.1 t分布 7.2 F分布 7.3 \\(\\chi^2\\)分布", " Chapter 7 由正态分布引出的三大抽样分布 7.1 t分布 说起t分布，首先要提一句u分布，正态分布（Normal Distribution）是许多统计方法的理论基础。 正态分布的两个参数\\(\\mu\\)和\\(\\sigma\\)决定了正态分布的位置和形态。为了应用方便，常将一般的正态变量X通过u变换\\([(X-\\mu)/\\sigma]\\)转化成标准正态变量u，以使原来各种形态的正态分布都转换为\\(\\mu=0,\\sigma=1\\)的标准正态分布(Standard Normal Distribution)，亦称u分布。 根据中心极限定理，通过抽样模拟试验表明，在正态分布总体中以固定 n 抽取若干个样本时，样本均数的分布仍服从正态分布，即\\(N(\\mu,\\sigma)\\)。所以，对样本均数的分布进行u变换，也可变换为标准正态分布\\(N(0,1)\\)。 由于在实际工作中，往往\\(\\sigma^2\\)(总体方差)是未知的，常用\\(s^2\\)(样本方差)作为\\(\\sigma^2\\)的估计值，为了与u变换区别，称为 t 变换，统计量 t 值的分布称为 t 分布。 Figure 7.1: t-distribution Curves t 分布是英国统计学家 W.S. Gosset 在 1908 年以笔名 Student发表的论文中提出的, 故后人称为 “学生氏 (Student) 分布” 或 “t 分 布”。 7.2 F分布 Figure 7.2: F-distribution Curves 7.2.1 F分布的应用 方差的同质性检验 组与组之间的差异称组间变异（variation between classes），反映在各组的平均数不同。同一组内部被试（个体）之间的差异称组内变异（variation within class），反映在每一个个体之间的差异。 总变异的分解： 总变异 = 组间变异+组内变异 组间变异 = 实验条件 + 随机误差 组内变异 = 个体差异 + 实验误差 。组内误差都是随机误差。 7.3 \\(\\chi^2\\)分布 Figure 7.3: Chi-square Distribution Curves 7.3.1 卡方检验应用 检验连续变量的分布是否与某种理论分布一致。 检验某个分类变量各类的出现概率是否等于指定概率。 检验某两种方法的结果是否一致。 "],["参数估计.html", "Chapter 8 参数估计 8.1 统计量 8.2 抽样分布 8.3 一个正态总体参数的估计 8.4 两个正态总体的参数估计 8.5 小结", " Chapter 8 参数估计 8.1 统计量 统计量实际上是一种对样本数据信息的压缩。一个好的统计量，应该能把样本中包含总体的信息全部提炼出来，而不损失任何信息，这样的统计量称为充分统计量（sufficient statistic）。 8.2 抽样分布 8.2.1 样本均数\\(\\bar X\\)的抽样分布 抽样误差是抽样研究固有的属性，不可避免，它是由个体变异和抽样共同引起的。 总体方差已知，或总体方差未知但样本量足够大时 \\[\\bar X \\sim N(\\mu,\\sigma_{\\bar X}^2)\\] 将\\(\\bar X\\)标准化，有： \\[U=\\frac{\\bar X-\\mu}{\\sigma_{\\bar X}}=\\frac{\\bar X-\\mu}{\\sigma_ X/\\sqrt{n}}\\] U为标准化随机变量，\\(U\\sim N(0,1)\\)。 若从一个非正态总体中随机抽样，且样本量足够大\\((n\\geq30)\\)，样本均数\\(\\bar X\\)的抽样分布又该如何？ 中心极限定理(Central limit theorems):中心极限定理指的是给定一个任意分布的总体\\(X\\)，只要存在有限的方差\\(\\sigma^2(\\sigma^2\\neq0)\\)，则当样本量n足够大时，样本均数\\(\\bar X\\)的抽样分布将近似的服从均数为\\(\\mu\\)和方差为\\(\\sigma_{\\bar X}^2\\)的正态分布。 \\[\\bar X\\simeq N(\\mu,\\frac{\\sigma^2}{n})\\] 在大样本量条件下，由于样本方差\\(S^2\\)对总体方差\\(\\sigma^2\\)的估计误差非常小，实践中我们可以直接用\\(S^2\\)替代\\(\\sigma^2\\)进行计算。 每次从这些总体中随机抽取\\(n\\)个抽样，一共抽\\(m\\)次。然后把这\\(m\\)组抽样分别求出平均值。这些平均值的分布接近正态分布。 8.2.2 样本方差\\(S^2\\)的抽样分布 \\[\\frac{(n-1)S^2}{\\sigma^2}\\sim \\chi^2(v)\\] \\(\\chi^2\\)分布式赫尔默特（F.R. Helmert）于1875年研究来自正态总体的样本方差的抽样分布时得出的，其密度函数为： \\[f_v(x)=\\begin{cases} \\frac{1}{2^{\\frac{v}{2}}\\Gamma\\left(\\frac{v}{2}\\right)}y^{\\frac{v}{2}-1}\\mathrm{e}^{-\\frac{\\chi^2}{2}},&amp;\\chi^2&gt;0\\\\ 0,&amp;\\chi^2\\leq0\\end{cases}\\] \\(\\chi^2\\)分布和\\(t\\)分布一样，是依赖于参数（自由度）的一簇分布。随着自由度的增加，其分布曲线由正偏态分布趋近于正态分布。 8.2.3 样本率的抽样分布 率的统计指标 计算公式 样本率\\(p\\)的总体均数 \\(\\mu_{p}=\\pi\\) 样本量\\(p\\)的方差 \\(\\sigma_p^2=\\frac{\\pi(1-\\pi)}{n}\\)(理论值);\\(S_p^2=\\frac{p(1-p)}{n}\\)(估计值) 样本率\\(p\\)的标准差 \\(\\sigma_p=\\sqrt{\\frac{\\pi(1-\\pi)}{n}}\\)(理论值);\\(S_p=\\sqrt{\\frac{p(1-p)}{n}}\\)(估计值) 率的标准误 \\(\\sigma_p=\\sqrt{\\frac{\\pi(1-\\pi)}{n}}\\)(理论值);\\(S_p=\\sqrt{\\frac{p(1-p)}{n}}\\)(估计值) 8.2.4 样本均数及其抽样分布 均数的统计指标 计算公式 样本均数 \\(\\bar X=\\frac{\\sum_\\limits{i=1}^{n}X_i}{n}\\) 样本方差 \\(\\sigma^2=\\frac{\\sum_\\limits{i=1}^{n}(\\mu-\\bar \\mu)^2}{n}\\)(理论值);\\(S^2=\\frac{\\sum_\\limits{i=1}^{n}(X_i-\\bar X)^2}{n-1}\\)(估计值) 1 样本均数标准误(SE) \\(\\sigma_{\\bar X}=\\frac{\\sigma}{\\sqrt{n}}\\)(理论值);\\(S_{\\bar X}=\\frac{S}{\\sqrt{n}}\\)(估计值) 大数定律(Law of large Numbers):当随机事件发生的次数足够多时，随机事件发生的频率趋近于预期的概率。可以简单理解为样本数量越多，其平概率越接近于期望值。大数定律的条件： 独立重复事件； 重复次数足够多。 8.3 一个正态总体参数的估计 8.3.1 点估计 8.3.2 区间估计 8.3.2.1 总体均数\\(\\mu\\)的置信区间估计 正态（或正态近似法） t分布法 8.3.2.2 总体方差\\(\\sigma^2\\)的置信区间估计 8.4 两个正态总体的参数估计 8.5 小结 样本均数的中心极限定理。从任意均数等于\\(\\mu\\)，方差等于\\(\\sigma^2\\)的一个总体中抽取样本量为\\(n\\)的简单随机样本，当样本量\\(n\\)很大时，无论总体分布形态如何，样本均数的抽样分布近似服从正态分布。 样本率的中心极限定理。从“成功”率为\\(\\pi\\)的总体中随机抽取样本量为\\(n\\)的样本，其样本“成功”率用\\(p\\)表示，当\\(n\\pi&gt;5\\)且\\(n(1-\\pi)&gt;5\\)时，样本率\\(p\\)近似服从正态分布。 无偏方差:\\(S^2\\)作为样本方差，称之为无偏方差。样本方差是度量样本离散程度的统计量，其中n为样本量， \\(\\sum_{i=1}^{n}(x_i-\\bar x)^2\\)为偏差平方和，\\(n-1\\)称为偏差平方和的自由度，因为在\\(\\bar x\\)确定后，\\(x_i(i=1,2,\\dots,n)\\)中只有\\(n-1\\)个可以自由变动。↩︎ "],["定量资料与分类资料的分析步骤.html", "Chapter 9 定量资料与分类资料的分析步骤 9.1 定量资料的分析步骤 9.2 分类资料的分析步骤 9.3 经典例题", " Chapter 9 定量资料与分类资料的分析步骤 9.1 定量资料的分析步骤 Quantitative Data Analysis Steps Quantitative data difference test 9.2 分类资料的分析步骤 Categorical Data Analysis Steps Categorical data difference test 9.3 经典例题 9.3.1 经典例题1 将未成年的SD大鼠按照同窝、同性别和体重接近的原则配成6对，每队中两只大白鼠随机确定一只注射雌激素0.2 ug/100g，另一只注射雌激素0.4 ug/100g，一段时间后，测量两组大白鼠的子宫重量，见下表，问不同剂量的雌激素对SD大鼠子宫重量的影响有无差别？某研究人员通过计算两组大鼠子宫重量的均数，然后直接比较两均数的大小，得出结论：注射高剂量的雌激素后大鼠子宫重量高于低剂量组。 对子号 0.2 ug/100g 0.4 ug/100g 差值d d2 （1） （2） （3） （4） （5） 1 84 108 -24 576 2 42 65 -23 529 3 70 94 -24 576 4 64 88 -24 576 5 65 92 -27 729 6 76 90 -14 196 合计 -136 3182 问题： （1）该资料为何种类型资料？来自何种分部总体？ （2）该研究属于何种设计？研究的目的是什么？ （3）上述研究人员比较方法是否正确？为什么？应该怎样比较？ 解析： （1）该资料是两组定量资料，根据经验两组数据均来自正态总体。 （2）该研究属于配对设计，研究的目的是比较不同剂量的雌激素对SD大鼠子宫重量的影响有无差别。 （3）比较方法不正确，应为该研究人员直接用两个样本的信息去比较，没有考虑抽样误差，正常去要进行假设检验，需要看差值是否服从正态分布，如果服从正态分布，采用配对t检验，如果不服从正态分布，则采用wilcoxon秩和检验。本体差值没有太大的波动，大概率服从正态分布。 9.3.2 经典例题2 某医生用某中药治疗不同类型的小儿肺炎，其中病毒性肺炎62例，细菌性肺炎60例，治疗结果见下表，该医生对此资料采用行×列表资料的\\(\\chi^2\\)检验，得\\(\\chi^2=7.085\\)，\\(P=-0.069\\)，差异无统计学意义，故不能认为该中药对不同类型小儿肺炎的疗效有差异。 小儿肺炎类型 痊愈 显效 进步 无效 合计 病毒性肺炎 21 18 12 11 62 细菌性肺炎 11 13 16 20 60 合计 32 31 28 31 122 问题： （1）该资料为何种类型资料？分析目的是什么？ （2）该研究属于何种设计方案？ （3）该医师选用的统计方法是否正确？为什么？ （4）该资料应该用何种统计方法？其步骤如何？ 解答 （1）该资料是有序分类资料，分析目的是比较某中药对不同类型小儿肺炎的疗效是否有差异。 （2）该研究属于完全随机设计。 （3）卡方检验只能对构成比和率是否有差别，不能比较不同程度的效果。 （4）该资料有程度等级变化，应该采用秩和检验，对比两组采用\\(wilcoxon\\)秩和检验（对比多组使用\\(Kruskal-Wallis H\\)检验）；其步骤如下： 建立检验假设，确定检验水准。 计算统计量，需要按照有序分类程度，按照程度进行编制，求各组的秩和，采用查表和近似Z检验。 通过计算\\(P\\)值，与\\(\\alpha\\)值进行比较，得出结论。 "],["置信区间.html", "Chapter 10 置信区间 10.1 置信区间与医学参考值范围的辨析 10.2 置信区间的含义与常见说法辨析 10.3 置信区间的两要素及影响因素", " Chapter 10 置信区间 10.1 置信区间与医学参考值范围的辨析 10.1.1 标准差与标准误 类目 标准差 均数的标准误 定义 描述一组变量的离散程度，并可以作为总体标准差的点估计 描述多个样本均数的离散程度，并且是样本均数的标准差估计值 应用 1. 标准差越小，个体资料的离散程度就越小，说明变量值围绕均数分布越紧密，均数的代表性越好 2.估计医学参考值范围，计算变异系数和标准误 1. 标准误越小，统计量的平均抽样误差就越小，说明样本均数和总体均数的平均差异越小，用样本均数估计总体均数的可靠性越大；2. 计算置信区间、进行假设检验 与n的关系 n越大，样本标准差随机波动的幅度越来越小，并且稳定在总体标准差附近 n越大，样本均数的标准误越小，并且趋向于0 控制方法 个体差异，不能通过统计方法控制 增加n，可以减小标准误 二者联系 1. 两者都是变异指标 2. 在n相同的情况下，标准差越大，标准误相对越大；标准差越小，标准误也相对越小。正比关系 3. \\(\\sigma_{\\bar x}=\\frac{\\sigma}{\\sqrt{n}}\\),\\(\\sigma_{\\bar x}\\)与\\(\\sigma\\)成正比，与\\(\\sqrt{n}\\)成反比。 10.1.2 置信区间与医学参考值范围 类目 总体均数的置信区间 医学参考值范围 含义 按照预先给定的概率，确定的包含未知总体参数\\(\\mu\\)（总体均数）的可能范围 指特定的“正常”人群（排除了对所研究指标有影响的疾病和有关因素的人群）的生理生化指标中大多数个体的取值所在的范围 举例 若某一样本的均值为10，其95%可信区间为（9.5,10.5），这就表示总体均数介于（9.5,10.5）之间的可信度为95% 假设空腹血糖95%正常值范围为（3.6,6.1），这就是指95%正常人的空腹血糖值介于（3.6,6.1）之间 计算 1. 总体标准差位置，且样本量n不大，根据t分布计算；2. 总体标准差未知，n足够大，正态近似法；3. 总体标准差已知，根据Z分布计算 1. 正态分布法； 2. 偏态分布法 用途 总体均数的区间估计（估计未知的总体均数所在范围 1. 个体值的波动范围； 2. 绝大多数观察对象某指标分布范围； 3. 医学判断个体某指标是否正常 95%理解的常见误区 区别 10.2 置信区间的含义与常见说法辨析 在95%置信区间内有95%的总体参数在该区间？× 在95%置信区间内，该区间包含了95%的总体参数？× 以\\(1-\\alpha=95\\%\\)算得的100个可信区间中，平均有95个可信区间包含了总体均数，而另外5个未包含总体均数。√ 在95%置信区间，该区间有95%的可能包含总体参数？× 该区间包含总体参数，可信度在95%。√ 总体参数有95%的可能落在该区间。× 10.3 置信区间的两要素及影响因素 10.3.1 置信区间的两要素 10.3.2 置信区间的影响因素 "],["假设检验.html", "Chapter 11 假设检验 11.1 假设检验的基本步骤 11.2 假设检验的两型错误、检验效能 11.3 假设检验与置信区间的关系", " Chapter 11 假设检验 11.1 假设检验的基本步骤 步骤 内容 建立假设检验，确定检验水准 1. 双侧检验：\\(H_{0}:\\mu_{d}=0;H_{1}:\\mu_{d}\\neq 0,\\alpha=0.05\\) 2. 单侧检验：\\(H_{0}:\\mu_{d}=0;H_{1}:\\mu_{d}&lt;0或\\mu_{d}&gt;0,\\alpha=0.05\\) 1. 假设检验是针对总体的，而非样本；2. 单双侧检验主要根据专业知识预先确定，并且还需要考虑差异的方向； 3. 单侧检验的检验效能更高。 计算并选择检验统计量 1. 根据研究设计方案、资料类型、样本含量大小及分析目的选用适当的检验方法，并根据样本资料计算相应的检验统计量；2. 不同的检验方法要用不同的公式计算现有样本的检验统计量（\\(t\\)检验、\\(\\chi^2\\)检验、\\(F\\)检验）；3. 检验统计量是在\\(H_{0}\\)成立的前提下计算的。 确定P值，做出推断 假设检验的统计学结论：1. 若\\(P\\le \\alpha\\)，按所取\\(\\alpha\\)检验水准，拒绝\\(H_{0}\\)，接受\\(H_{1}\\)，可以认为…有差异；2. 若\\(P&gt;\\alpha\\)时，现有样本信息还不足以拒绝H0，尚不能认为…有差异 假设检验所做出的的结论是具有概率性质的，不是绝对的肯定或否定。不论拒绝或不拒绝\\(H_{0}\\)都可能发生错误。下结论时，只能两种：1. 两总体有无差异；2. 两样本差异有无统计学意义。 11.2 假设检验的两型错误、检验效能 客观实际 拒绝\\(H_{0}\\)，接受\\(H_{1}\\) 不拒绝\\(H_{0}\\) \\(H_{0}\\)成立 \\(\\textrm{I}\\)型错误(\\(\\alpha\\))(假阳性) 错误拒绝实际成立的\\(H_{0}\\) 正确推断(\\(1-\\alpha\\)) \\(H_{0}\\)不成立 正确推断(\\(1-\\beta\\))\\(H_{1}\\)为真，能够拒绝\\(H_{0}\\)的概率称为发现该\\(H_{1}\\)的检验效能，用\\(1-\\beta\\)表示 \\(\\textrm{II}\\)型错误(\\(\\beta\\))(假阴性)不拒绝实际不成立的\\(H_{0}\\) 11.2.1 \\(1-\\beta\\)的影响因素： 检验水准\\(\\alpha\\)（正向）——检验水准\\(\\alpha\\)越大，检验效能越大 \\(H_{0}\\)与\\(H_{1}\\)的差异大小（正向）——差异越大，检验效能越大 样本量（正向）——样本量越大，检验效能越大 标准差越大（反向）——个体差异（标准差）越小，检验效能越大 单双侧检验：单侧检验效能高于双侧检验效能 11.2.2 \\(\\alpha 、\\beta 、1-\\beta\\)关系： 当样本量确定时，\\(\\alpha\\)与\\(\\beta\\)呈反向变化关系，与\\(1-\\beta\\)呈正向变化关系。如果把\\(\\alpha\\)设置得很小，势必增加犯\\(\\textrm{II}\\)型错误的概率，从而降低检验效能；反之，如果把重点放在减少\\(\\beta\\)上，势必增加犯\\(\\textrm{I}\\)型错误的概率，从而降低了置信度。 要同时减小\\(\\alpha\\)和\\(\\beta\\)，只有通过增加样本含量来计算。 11.3 假设检验与置信区间的关系 基本思想 假设检验 置信区间 基本思想 假设检验的假设是指我们对总体特征（如参数、分布）的某种推测，从而用概率来判断样本数据所提供的的信息和我们对总体特征猜想的一致性，进而结合专业知识判断这一猜想的正确性 置信区间是指有样本统计量所构造的总体参数的估计区间，区间估计是按照一定的概率和可信度\\((1-\\alpha)\\)用一个区间估计总体参数所在的范围，这个范围称作可信度为\\((1-\\alpha)\\)的可信区间 区别 1. 假设检验用于推断总体参数之间是否不同 1. 置信区间用于推断总体参数所在范围； 2.置信区间比假设检验提供更多的信息，置信区间能够回答假设检验的问题； 3. 置信区间在回答差别有无统计学意义时，还可以提示差别是否具有实际意义。 联系 1. 假设检验与置信区间都属于统计推断方法；2. 置信区间估计总体参数所采用的的统计量与假设检验的检验统计量相同； 3.置信区间能够回答假设检验的问题。根据置信度\\(1-\\alpha\\)构造置信区间，如果统计量在置信区间内，那么不拒绝原假设；如果不在置信区间中，那么拒绝原假设；4. 双侧检验时，置信区间确定的\\(z&#39;\\)与检验水准\\(\\alpha\\)确定的检验统计量的分布界值相同，因此，在双侧检验时\\(C=1-\\alpha\\)。根据显著水平\\(\\alpha\\)，可以构造置信度为\\(1-\\alpha\\)的置信区间 "],["参数检验.html", "Chapter 12 参数检验 12.1 参数检验和非参数检验的区别 12.2 \\(t\\)分布 12.3 方差分析", " Chapter 12 参数检验 12.1 参数检验和非参数检验的区别 维度 参数检验（Parameter test） 非参数检验（Non-parameter tests） 定义 以特定的总体分布为前提\\(\\rightarrow\\)? 不依赖于总体分布特征\\(\\rightarrow\\)? 举例 \\(Z\\)检验、\\(t\\)分布、\\(F\\)检验 秩和检验（Rank sum test）、卡方检验 优点 1. 直接利用原始观测值计算统计量，检验效能高；2.可对总体参数做出估计 1. 适用范围广、收集资料方便；2. 多数非参数检验方法比较简便、易于掌握 缺点 对数据分布有特定要求，适用范围窄 1. 没有充分利用原始数据，检验效能低；2. 不能对总体参数做出推断 适用范围 必须符合相应的要求，如两样本t检验要求：独立、正态、方差齐 1. 总体分布形式未知、分布类型不明确、偏态分布数据；2. 等级资料；3. 不满足参数检验条件的数据；4. 数据一段或两端为无法测量的数值等。 选用原则 1. 如果数据符合参数检验条件，或经过变换后符合参数检验的条件，最好用参数检验；2. 参数检验误用为非参数检验，会导致检验效能降低。 12.2 \\(t\\)分布 类目 \\(t\\)分布 概念 设从正态分布\\(N(\\mu,\\sigma^2)\\)随机抽取含量为n的样本，样本均数为\\(\\bar x\\)、标准差为\\(s\\)、则\\(t=\\frac{\\bar x-\\mu}{s_{\\bar x}}=\\frac{\\bar x-\\mu}{s/\\sqrt{n}}\\)，自由度为\\(n-1\\)。 图形特点 一簇以0为中心，左右对称的单峰曲线； 但随着自由度的增加，\\(t\\)分布曲线将越来越接近于标准正态分布曲线 统计量值 \\(t\\)的取值范围\\(-\\infty \\sim +\\infty\\) 自由度 \\(v=n-1\\) Figure 12.1: t-Distribution Curves vs. Standard Normal Curve 12.3 方差分析 12.3.1 完全随机设计的方差分析 类目 完全随机设计的方差分析 数据要求 独立性、正态性、方差齐性 检验目的 推断多个样本所代表的总体均数是否不等 \\(H_0\\)与\\(H_1\\) \\(H_0\\):\\(\\mu_1=\\mu_2=\\dots =\\mu_a\\)，各组所代表的总体均数相等。\\(H_1\\):\\(\\mu_1,\\mu_2,\\dots,\\mu_a\\)各组总体均数不全相等（至少有一个不等式成立） 检验统计量 \\(F=\\frac{MS_{组间}}{MS_{组内}}\\sim(v_{组间}=k-1，v_{组内}=n-k）\\) 关键要点 总变异分解为组间变异和组内变异 12.3.2 随机区组设计的方差分析 类目 随机区组设计的方差分析 数据要求 处理组间、区组间数据满足独立、正态性和方差齐性 处理组假设 \\(H_0\\)：不同处理组水平的均数相同；\\(H_1\\)：不同处理组水平的均属不全相同 区组假设 \\(H_0\\)：不同区组对观测指标的影响很大；\\(H_1\\)：不同区组对观测指标的影响不全相同 检验统计量 \\(F=\\frac{MS_{处理}}{MS_{误差}}\\sim(v_{处理}=k-1,v_{误差}=(b-1)×(k-1))\\)\\(F=\\frac{MS_{区组}}{MS_{误差}}\\sim(v_{区组}=k-1,v_{误差}=(b-1)×(k-1))\\) 关键要点 总变异分解为处理组变异、区组变异和随机误差变异 "],["非参数检验.html", "Chapter 13 非参数检验 13.1 卡方检验 13.2 率的比较 13.3 独立性检验 13.4 秩和检验", " Chapter 13 非参数检验 13.1 卡方检验 13.1.1 分类资料差异比较的方法 资料特征 数据特征 完全随机设计 配对设计 随机区组 单组 两组 多组 分类资料 无序分类资料 二项分布直接计算概率法、正态近似法（Z检验）、率的正态近似 独立四格表\\(\\chi^2\\)检验、Fisher确切概率法 R×C交叉表\\(\\chi^2\\)检验、Fisher确切概率法 配对四格表\\(\\chi^2\\)检验，配对R×R列联表\\(\\chi^2\\)检验 / 等级资料 Wilcoxon符合秩和检验 wilcoxon秩和检验 Kruskal-Wallis H检验 Wilcoxon符合秩和检验 Friedman M秩和检验 13.1.2 单个率的比较 方法 内容 确切概率法 1. 适用情形：样本量较小或\\(\\pi_0\\)不靠近0.5时作单侧检验的情形。2. 计算公式：(1)最多有k例阳性的概率：\\(Pr(X\\le k)\\)(2)最少有k例阳性的概率：\\(Pr(X\\ge k)\\) 正态近似法 1. 适用情形：样本量较大时，\\(n\\pi,n(1-\\pi)\\)均大于5；2. 计算公式：分子为\\(p-\\pi_0\\)，分母为率的标准误 notice：上式中p为样本率，\\(\\pi_0\\)为给的总体率（常为理论值或标准值），n为样本含量。 13.2 率的比较 13.2.1 2×2交叉表数据的\\(\\chi^2\\)检验 方法 情形 计算公式 独立四格表卡方检验 \\(n\\ge 40\\)且所有的\\(T\\ge 5\\)\\(n\\ge 40\\)且任一理论频数有\\(1\\le T&lt; 5\\)当\\(n&lt;40\\)，或任一一个格子理论频数\\(T&lt;1\\)时 卡方基本公式、独立四格表专用公式同上、但是需要校正用四格表资料的Fisher确切概率法 正态近似法 \\(n_1p_1,n_1(1-p_1),n_2p_2,n_2(1-p_2)\\)均大于5 分子为样本率之差，分母为样本率差的标准误\\(S_{p1-p2}\\)为两个样本率之差的标准误，\\(p_c=\\frac{x_1+x_2}{n_1+n_2}\\)为两样本的合并率 校正样本率的正态近似法 当\\(n_1p_1,n_1(1-p_1),n_2p_2,n_2(1-p_2)\\)不太大时 同上，但是需要对样本率实施“分子+2、分母+4”的校正 notice： 正态近似法与卡方检验结果是很接近的。在日常计算时，因为计算简便，故常用卡方检验公式。 四格表的自由度为1。 四格表实际频数变动时，若周边合计数保持不变，则理论频数将不会产生变化。 用\\(n_R\\)和\\(n_C\\)和n分别表示行合计、列合计和总合计，则计算每格理论数的公式为：\\(T_{RC}=\\frac{n_R×n_C}{n}\\)。 \\(\\chi^2\\)检验的基本公式：\\(\\chi^2=\\sum \\frac{(A-T)^2}{T}\\)。 校正的\\(\\chi^2\\)检验的基本公式：\\(\\chi^2=\\sum \\frac{(|A-T|-0.5)^2}{T}\\)。 13.2.2 配对设计数据的\\(\\chi^2\\)检验 方法 情形 计算公式 配对四格表卡方检验 当\\((b+c)\\ge 40\\)时当\\((b+c)&lt;40\\)时 配对卡方检验专用公式校正配对卡方检验专用公式 配对R×R交叉表数据的\\(\\chi^2\\)检验 R（\\(R\\ge2\\)） \\(T=\\frac{k-1}{k}\\sum_{i=1}^{k}\\frac{(n_i-m_i)^2}{n_i+m_i-2A_{ii}}\\) notice： 配对\\(\\chi^2\\)检验的基本公式：\\(\\chi^2=\\sum \\frac{(A-T)^2}{T}=\\frac{(b-c)^2}{b+c}\\)。 若b+c&lt;40,使用校正的配对\\(\\chi^2\\)检验的基本公式：\\(\\chi^2=\\sum \\frac{(|b-c|-1)^2}{b+c}\\)。 13.3 独立性检验 13.3.1 2×2交叉表的独立性检验 建立假设检验，确定检验水准 \\(H_0\\):两变量之间相互独立 \\(H_1\\):两变量之间相互独立 \\(\\alpha=0.05\\) 计算检验统计量 \\[\\chi^2=\\sum_{i,j}\\frac{(A_{ij}-T_{ij})^2}{T_{ij}} \\] 确定P值，做出推断 关联系数的计算 \\[r=\\sqrt{\\frac{\\chi^2}{\\chi^2+n}}\\] 13.3.2 2×2配对数据的独立性检验 13.3.3 R×C样本率或构成比的比较 类目 内容 假设检验 \\(H_0\\)：各组总体率（或构成比）相同。\\(H_1\\)：各组总体率（或构成比）不同（不全相同）。 计算公式 卡方检验基本公式，自由度为：\\(v=(R-1)(C-1)\\) 数据要求 1. 应用条件：不能有理论频数小于1的格子，或者不能有1/5以上的理论频数大于等于1且小于5 2. 不能进行卡方检验时的解决办法：①增加样本量；②合并或删除理论频数比较小的行或列；③采用Fisher确切概率法 卡方分割 多个率或多个频率分布比较的卡方检验，当结论为拒绝\\(H_0\\)时，仅表示多组之间是有差别的。若需要明确研究是那两组之间存在差别，可做率的多重比较，将R×C表分割为若干个小的四格表进行检验，并且需要根据比较的次数合理地修正检验水准\\(\\alpha\\)，否则将人为地增大犯第一类错误的概率 notice: 多个独立样本率的比较，根据R个独立样本的频率分布，是检验R个二项分布总体的概率是否相同，。假设对四个样本率进行比较，进行\\(\\chi^2\\)检验，则它的行数为4，列数为2，其自由度为\\(v=(R-1)×(C-1)=(4-1)(2-1)=3\\)。 针对行列表资料的\\(\\chi^2\\)检验，若有\\(1/5\\)格子以上的理论频数小于5，即\\(1\\le T\\le5\\)时，应考虑增加样本量，或结合专业知识对行或列进行合并。 13.4 秩和检验 "],["简单线性相关和回归.html", "Chapter 14 简单线性相关和回归 14.1 两变量关系分析 14.2 常见相关系数 14.3 简单直线回归 14.4 直线相关与直线回归的比较", " Chapter 14 简单线性相关和回归 14.1 两变量关系分析 two variables relationship 14.2 常见相关系数 14.2.1 直线相关分析基本流程 The basic process of straight-line regression analysis 14.2.2 三类相关系数总结 名称 适用条件 Pearson直线相关系数 双变量正态分布的资料\\(\\rightarrow\\)定量\\(\\rightarrow\\)类比t检验、方差分析 列联系数 非等级资料\\(\\rightarrow\\)分类\\(\\rightarrow\\)类比卡方检验 Spearman秩相关系数 不满足双变量正态分布、分布未知、等级资料\\(\\rightarrow\\)定量+分类\\(\\rightarrow\\)类比秩和检验 14.3 简单直线回归 14.3.1 直线回归分析的基本流程 Draw a scatterplot 14.3.2 回归方程的建立 选择一组数据集的“最佳拟合直线”，需要设法通过观测数据确定参数\\(\\alpha\\)与\\(\\beta\\)的估计值a和b，使得直线 \\[\\hat y=a+bx\\] 能最佳地反映\\((x_i,y_i)\\)之间的变化关系，该直线称为一元回归直线。 常用最小二乘估计法（least squares estimation）来最佳直线，其基本原理是通过最小化残差平方和，使得各观测点到回归直线的纵向距离的平方和最小。 \\[ \\begin{cases} a=\\bar y-b \\bar x\\\\ b=\\frac{\\sum\\limits_{i=1}^n x_i y_i - \\frac{1}{n}(\\sum\\limits_{i=1}^n x_i)(\\sum\\limits_{i=1}^n y_i)}{\\sum\\limits_{i=1}^n x_i^2 - \\frac{1}{n}(\\sum\\limits_{i=1}^n x_i)^2} \\end{cases} \\] 为方便，引入以下记号： \\[ SS_{xx}=\\sum_{i}(x_i-\\bar x)^2=\\sum_{i}x_i^2-\\frac{1}{n}(\\sum_{i}x_i)^2\\\\ SS_{yy}=\\sum_{i}(y_i-\\bar y)^2=\\sum_{i}y_i^2-\\frac{1}{n}(\\sum_{i}y_i)^2\\\\ SS_{xy}=\\sum_{i}(x_i-\\bar x)(y_i-\\bar y)=\\sum_{i}x_i y_i-\\frac{1}{n}(\\sum_{i}x_i)(\\sum_{i}y_i) \\] 其中，\\(SS_{xx}\\)和\\(SS_{yy}\\)是离均差平方和，\\(SS_{xy}\\)称为离均差积和。 这样可以简化为： \\[ \\begin{cases} a=\\bar y-b \\bar x\\\\ b=\\frac{SS_{xy}}{SS_{xx}} \\end{cases} \\] 14.3.3 假设检验 F检验 \\(y_i\\)的总离均差平方和为： \\[SS_{yy}=\\sum_{i}(y_i-\\bar y)^2\\] 对其做分解，得到等式： \\[SS_{yy}=\\sum_{i}^{n}(\\hat y_i-\\bar y)^2+\\sum_{i}^{n}(y_i-\\hat y_i)^2\\] \\(\\sum_{i}^{n}(\\hat y_i-\\bar y)^2\\)为回归平方和（regression sum of squares），记为\\(SS_R\\)，表示回归估计值\\(\\hat y_i\\)与均数\\(\\bar y\\)的离差平方和，其公式为： \\[ \\begin{align} SS_{yy} &amp;= \\sum_{i=1}^{n}(\\hat y_i - \\bar y)^2 \\\\ &amp;= \\sum_{i=1}^{n}[a + bx_i - (a + b\\bar x)]^2 \\\\ &amp;= SS_{xx}b^2 \\\\ &amp;= SS_{xy}b \\end{align} \\] 显然，回归平方和\\(SS_{R}\\)反映的是在y的总变异中由x与y的直线回归关系解释的那部分变异。\\(SS_R\\)值越大，说明回归直线的拟合效果就越好。 \\(\\sum_{i}^{n}(y_i-\\hat y_i)^2\\)为残差平方和（residual sum of squares），记为\\(SS_E\\)，表示观测值\\(y_i\\)与回归估计值\\(\\hat y_i\\)的离差平方和，其公式为： \\[SS_E=\\sum_{i=1}^{n}(y_i-\\hat y_i)^2\\] \\(SS_E\\)反映了在总变异中扣除自变量x对因变量y的线性影响以后的其他因素（包括x对y的非线性影响和随机误差等）对y变异的影响，也就是在总平方和中无法用y和x线性回归关系解释的部分。\\(SS_E\\)值越小，说明回归直线的拟合效果就越好。 对公式进行简化： \\[\\begin{align} SS_{yy}=&amp;\\sum_{i}^{n}(\\hat y_i-\\bar y)^2+\\sum_{i}^{n}(y_i-\\hat y_i)^2\\\\ =&amp;SS_R+SS_E \\end{align}\\] 上述三个平方和，各有其相应的自由度\\(v\\)，并有如下关系： \\[v_{yy}=v_R+v_E\\\\ v_{yy}=n-1,v_R=1,v_E=n-2\\] 在\\(H_0\\)成立的条件下，有： \\[\\frac{SS_R}{\\sigma^2}\\sim \\chi^2(v_R),\\frac{SS_E}{\\sigma^2}\\sim \\chi^2(v_E)\\] 且\\(SS_R\\)和\\(SS_E\\)相互独立。 检验统计量： \\[F=\\frac{SS_R/v_R}{SS_E/v_E}\\] 服从自由度\\(v_R=1,v_E=n-2\\)的F分布。如果y和x确实存在直线回归关系，那么回归所解释的变异\\(SS_R\\)应大于其他因素所解释的变异\\(SS_E\\)。由此可见，F检验正是建立在这个基础上的。 对于给定的检验水准\\(\\alpha\\)， 如果\\(F&gt;F_{(v_R,v_E),1-\\alpha}\\)，则拒绝\\(H_0\\)，认为直线回归方程有统计学显著性； 如果\\(F\\leq F_{(v_R,v_E),1-\\alpha}\\)，则不拒绝\\(H_0\\)，尚不能认为直线回归方程有统计学显著性。 t检验法 14.4 直线相关与直线回归的比较 区别与联系 类目 内容 区别 资料要求 1. 线性相关要求X,Y服从双变量正态分布，对这种资料进行回归分析称为\\(\\textrm{II}\\)型回归，即可以把X当自变量，也可以当因变量，反之亦然。2. 线性回归要求Y在给定X值时服从正态分布，X可以是精确测量和严格控制的变量，这时的回归称为型回归，即不可以把X当因变量，Y当自变量进行回归分析。 应用 1. 线性相关用来表达两个变量间的互依关系，两个变量的研究地位是相等的，谁做X，谁做Y都可以；2. 线性回归用来表达两个变量间的依存变化的数量关系，即一个变量（为因变量Y）如何依存于另一个变量（为自变量X）而变化，两个变量的研究地位是不相等的。 意义 1. 相关系数r说明具有线性关系的两个变量之间的密切程度和相关方向；2. 回归系数b表示X每变化一个单位所导致的Y的平均变化量。 r和b的取值范围 r没有单位，而b有单位（其单位是：Y的单位/X的单位），所以导致两者的取值范围不同； \\(-1 \\le r \\le 1\\),\\(-\\infty&lt;b&lt;+\\infty\\) r和b的计算公式不同 \\(r=\\frac{l_{xy}}{\\sqrt{l_{xx}l_{yy}}}\\),\\(b=\\frac{l_{xy}}{l_{xx}}\\) 联系 符号 对于既可以做相关又可作回归的同一组资料，计算出r与b的正负号相同 假设检验 对于同一组资料，相关系数和回归系数的假设检验等价。即有：\\(t_b=t_r\\) 相互换算 对于同一组资料，相关系数和回归系数可通过下式换算：\\(b=s\\frac{S_Y}{S_X}\\)，式中的\\(S_X,S_Y\\)分别是\\(X,Y\\)的标准差 用回归解释相关 又决定系数\\(R^2=\\frac{SS_{回}}{SS_{总}}\\)，当总平方和的大小决定了相关的密切程度，回归平方和越接近总平方和，则\\(R^2\\)越接近1，相关的效果越好，说明回归效果越好，相关的密切程度也越高。 notice：关于双变量正态分布 双元正态变量是指两个随机变量同时遵循正态分布的情况，通常记作 \\((X, Y) \\sim N(\\mu, \\Sigma)\\)，其中 \\(\\mu\\) 是均值向量，\\(\\Sigma\\) 是协方差矩阵。 数学定义 1. 均值向量：对于双元正态变量 $(X, Y)$，均值向量为： \\[\\mu = \\begin{pmatrix} \\mu_X \\\\ \\mu_Y \\end{pmatrix}\\] 其中 \\(\\mu_X\\) 和 \\(\\mu_Y\\) 分别是随机变量 \\(X\\) 和 \\(Y\\) 的均值。 2. 协方差矩阵：协方差矩阵为： \\[\\Sigma = \\begin{pmatrix} \\sigma_X^2 &amp; \\sigma_{XY} \\\\ \\sigma_{XY} &amp; \\sigma_Y^2 \\end{pmatrix}\\] 其中 \\(\\sigma_X^2\\) 和 \\(\\sigma_Y^2\\) 是 \\(X\\) 和 \\(Y\\) 的方差，\\(\\sigma_{XY}\\) 是它们之间的协方差。 性质 • 边缘分布：$X$ 和 $Y$ 的边缘分布也是正态分布。 • 条件分布：给定 $X$ 的值，$Y$ 的条件分布也是正态分布。 • 相关性：协方差矩阵的值可以用来判断 X 和 Y 之间的相关性。如果 $\\sigma_{XY} &gt; 0$，则两者正相关；如果 $\\sigma_{XY} &lt; 0$，则负相关。 示例 假设有一组数据描述学生的身高 \\(X\\) 和体重 \\(Y\\)，并且假设 \\((X, Y)\\) 服从双元正态分布： • 均值向量： \\[\\mu = \\begin{pmatrix} 170 \\\\ 65 \\end{pmatrix}\\] 表示身高的均值为 170 厘米，体重的均值为 65 千克。 • 协方差矩阵： \\[\\Sigma = \\begin{pmatrix} 100 &amp; 20 \\\\ 20 &amp; 25 \\end{pmatrix}\\] 这里，身高的方差为 100，体重的方差为 25，协方差为 20，表示身高和体重之间存在正相关关系。 在这个示例中，如果我们知道某个学生的身高为 180 厘米，我们可以利用条件分布来预测他的体重，这个体重的预测值也是正态分布。 我们用一个图形来展示： ## 安装和加载所需的包 #install.packages(&quot;plotly&quot;) #install.packages(&quot;mvtnorm&quot;) #library(plotly) #library(mvtnorm) # 创建网格数据 x &lt;- seq(150, 190, length.out = 100) #身高150-190，等距的100个值 y &lt;- seq(50, 80, length.out = 100) #体重50-80，等距的100个值 grid &lt;- expand.grid(X = x, Y = y) #生成 x 和 y 的所有组合，用于构建一个网格数据框，以便计算多元正态分布的概率密度。 # 设置均值和协方差矩阵 mu &lt;- c(170, 65) #设置双元正态分布的均值向量，表示均值分别为身高 170 cm 和体重 65 kg sigma &lt;- matrix(c(100, 20, 20, 25), nrow = 2) #设置协方差矩阵，表示身高的方差为 100，体重的方差为 25，身高和体重之间的协方差为 20 # 计算概率密度 z &lt;- dmvnorm(as.matrix(grid), mean = mu, sigma = sigma) #计算每个网格点上双元正态分布的概率密度。 # 将概率密度矩阵转换为适合绘图的形状 z_matrix &lt;- matrix(z, nrow = 100, ncol = 100) # 绘制三维表面图 plot_ly(x = x, y = y, z = z_matrix, type = &quot;surface&quot;) %&gt;% layout(title = list(text = &quot;双元正态分布的三维概率密度图&quot;, y=0.95), scene = list(xaxis = list(title = &quot;身高 (cm)&quot;), yaxis = list(title = &quot;体重 (kg)&quot;), zaxis = list(title = &quot;概率密度&quot;))) Figure 14.1: Binary normal distribution "],["学业迷思.html", "Chapter 15 学业迷思 15.1 2024.09.25", " Chapter 15 学业迷思 15.1 2024.09.25 下午用平板拍书，然后extract内容，paste到notion之中，进行格式调整与完善，预期的想法是将 所有习题统一抄录一份，然后形成电子文稿，方便自己打印出来练习或者放置到 网络上，然后将答案也放出来，以便后来者。 但是今天实际操作起来是很痛苦的，extract不总是能完全提取，notion的格式也不 总是如人意，每个软件和工具都有其优点和缺点，很难找到其中的平衡点。Rmarkdown 算是一个优秀的平衡之作，但是依旧繁琐。 如果按照以前的学习习惯，直接在书上写就是了，为什么要花那么多功夫来抄录与 展现，想了很久的答案，其实还是一个核心——neat and repeat。 希望能快速完成这个工作。 "],["usage用法.html", "Chapter 16 Usage(用法) 16.1 Render book(渲染这本书) 16.2 Preview book(预览这本书) 16.3 安装R+Rstudio 16.4 创建一个Rmarkdown文件 16.5 代码块的选项设置（options） 16.6 在vscode中编辑rmarkdown 16.7 与Rmarkdown的缘分 16.8 关于引用", " Chapter 16 Usage(用法) 每个 bookdown 章节都是一个 .Rmd 文件，每个 .Rmd 文件只能包含一个章节。一个章节 必须 以一级标题开始：# 一个好的章节，并且可以包含一个（且只能有一个）一级标题。 在章节内部使用二级标题及更高级别的标题，例如：## 一个简短的小节 或 ### 一个更短的小节。 index.Rmd 文件是必需的，并且也是您的第一章。当您渲染这本书时，它将成为主页。 常见的文档结构如下： my_book_project/ ├── index.Rmd ├── 01-chapter1.Rmd ├── 02-chapter2.Rmd ├── _bookdown.yml └── _output.yml 16.1 Render book(渲染这本书) 您可以在不更改任何内容的情况下，渲染此示例书籍的 HTML 版本： 在 RStudio IDE 中找到 Build 面板，然后 单击 Build Book，然后选择您的输出格式，或者如果您想要从相同的书籍源文件中使用多个格式，则选择 “All formats”。 或者从 R 控制台构建书籍： bookdown::render_book() 要将此示例渲染为 bookdown::pdf_book，您需要安装 \\(XeLaTeX\\)。建议您安装 TinyTeX（其中包含 \\(XeLaTeX\\)）：https://yihui.org/tinytex/。 当然你也可以下载别的\\(TeX\\)发行版，比如TeXLive和MaCTeX。对于TeXLive的下载可以参照LaTeX:TeXLive2021安装来进行；MaCTeX则可以参照 notice:在24年8月的时候，对文档进行了一次扩充和完善，但是文档增加和指令变多后，发现使用Rstudio界面中的Knit按钮无法完成对全文档的编译，如果 one by one 编译，会出现各文档不连贯的状态，并且在部分子文档中，出现部分代码无法编译，例如could not find ggplot function的情形，在此时应在Console终端输入bookdown::render_book(\"index.Rmd\")来对全文档进行编译（在此之前你需要Set Working Directory）。 16.2 Preview book(预览这本书) 在您工作时，您可以启动本地服务器以实时预览这本 HTML 书籍。当您保存单独的 .Rmd 文件时，此预览将会更新。您可以通过使用 RStudio 的插件 “Preview book” 或从 R 控制台中启动服务器。 bookdown::serve_book() 16.3 安装R+Rstudio R语言是一种自由软件编程语言与操作环境，主要用于统计分析、绘图以及数据挖掘。R由新西兰奥克兰大学的统计学家罗斯·伊哈卡和罗伯特·杰特曼开发，现在由R核心小组负责开发，同时也有其他用户编写了诸多外挂的软件包。R以S语言为基础，其词法作用域语义来自Scheme。R的后台程序大多由C语言、FORTRAN语言和R语言自己写成。 回归正题，要使用rmarkdown需要我们使用R与Rstudio，我们可以从R page来下载R这个程序， R 是一个用于统计计算和图形的免费软件环境；再从Rstudio来下载适配R的集成开发编辑器，普通的R script可以在vscode中进行编辑和运行，但是rmarkdown文件则需要再Rstudio中才能较好的编辑与运行。 安装的步骤可以参考在macOS中安装R与Rstudio Notice：macOS需要看一下是Intel还是ARM的CPU，ARM目前在M1/M2上搭载 16.4 创建一个Rmarkdown文件 因为我们要将这个文件配置到GitHub上作为网页，所以我们要创建一个特别一点的rmarkdown。 16.4.1 首先我们要安装一个专门的包bookdown # from CRAN install.packages(&#39;rmarkdown&#39;) or # install from GitHub devtools::install_github(&#39;rstudio/rmarkdown&#39;) 16.4.2 在set部分load bookdown library(rmarkdown) 16.4.3 其他宏包的需求与使用 如果要⽣成PDF输出，则需要安装LaTeX。对于从未安装过LaTeX的R Markdown⽤户，建议安装TinyTeX： install.packages(&#39;tinytex&#39;) tinytex::install_tinytex() TinyTex是Yihui Xie专为R Markdown开发的超轻量级的Latex环境，是⼀种轻便、可移植、跨平台、易于维护的LaTeX发⾏版。R中的配套软件包tinytex可以帮助我们在将LaTeX或R Markdown⽂档编译为PDF时⾃动安装缺少的LaTeX软件包，并确保将LaTeX⽂档编译正确的次数以解决所有交叉引⽤。 当然你可以选择下载TeXLive（Windows or Linux）或MacTeX（macOS）。 16.4.4 创建一个bookdown文件 创建项目 在Rstudio中点击File-&gt;New Project-&gt;New Directory-&gt;Bookproject using bookdown-&gt;Create Project 文件配置 在新建的R Markdown⽂件⾥，主要包含三块内容： YAML: R Markdown的头部文件，YAML（YAML Ain’t Markup Language）定义了R Markdown文档的元数据，包括文档的标题（title）、作者（author）、日期（date）、指定的输出文件类型（output format）等。YAML头部通常位于文档的开头，并用三条短划线（—）分隔。例如： --- title: &quot;文档标题&quot; author: &quot;作者姓名&quot; date: &quot;2024-06-08&quot; output: html_document --- Markdown文本: Markdown文本是R Markdown文档的主要内容，使用者按照Markdown语法自行编写的文本内容。Markdown语法简洁易懂，适用于编写格式化文本，如标题、列表、引用、链接和图片等。示例： # 一级标题 这是一个段落。 - 无序列表项1 - 无序列表项2 1. 有序列表项1 2. 有序列表项2 &gt; 这是一个引用。 代码块: R Markdown的一个主要功能是可以执行文档内的代码块，并将代码执行结果展示在Markdown文档中。这对撰写操作与分析报告带来了极大的便利，同时还可以进行良好的程序与结果复现。R Markdown文档中除了R代码段以外，还可以插入Python、SQL等许多编程语言的代码段。常用编程语言还可以与R代码段进行信息交换。代码块用三个反引号加上编程语言名称标识，例如： python section 16.5 代码块的选项设置（options） 默认情况下代码和结果会在输出⽂件中呈现。如果通过参数来控制代码块运⾏结果的输出情况可以在{r,options}中设置。⼀般包括代码及运⾏结果的输出、图⽚表格格式定义等。 16.5.1 输出信息选项 eval: 加选项eval=FALSE,可以使得代码仅显⽰⽽不实际运⾏。这样的代码段如果有标签，可以在后续代码段中被引⽤。 include: 加选项include=FALSE，则本代码段仅运⾏，但是代码和结果都不写⼊到⽣成的⽂档中。 echo: echo参数控制了Markdown是否显⽰代码块。若echo=TRUE，则表⽰代码块显⽰在markdown⽂档显⽰代码块；反之，代码块不出现在输出结果中。 collapse: ⼀个代码块的代码、输出通常被分解为多个原样⽂本块中，如果⼀个代码块希望所有的代码、输出都写到同⼀个原样⽂本块中，加选项collapse=TRUE。 prompt: prompt=TRUE代码⽤R的&gt;提⽰符开始。 comment：如果希望结果不⽤#号保护，使⽤选项comment=''。 results: ⽤选项results=选择⽂本型结果的类型。取值有： markup：这是缺省选项，会把⽂本型结果变成HTML的原样⽂本格式; hide：运⾏了代码后不显⽰运⾏结果; hold：⼀个代码块所有的代码都显⽰完，才显⽰所有的结果。 asis：⽂本型输出直接进⼊到HTML⽂件中，这需要R代码直接⽣成HTML标签，knitr包的kable()函数可以把数据框转换为HTML代码的表格。 16.5.2 错误信息选项 warning：选项warning=FALSE使得代码段的警告信息不进⼊编译结果，⽽是在控制台中显⽰。有⼀些扩展包的载⼊警告可以⽤这种办法屏蔽。 error：选项error=FALSE可以使得错误信息不进⼊编译结果，⽽是出错停⽌并将错误信息在控制台中显⽰。 message：选项message=FALSE可以使得message级别的信息不进⼊编译结果，⽽是在控制台中显⽰。 16.5.3 全局设置 若R Markdown内的代码块存在⼀样的参数设置，则可以提前设计好全局的代码块参数。全局代码块通过knitr::opts_chunk$set函数进⾏设置，⼀般设置在YAML⽂件下⽅。 例如本文的设置为： # 设置knitr全局选项 knitr::opts_chunk$set( echo = TRUE, # 是否显示代码 eval = TRUE, #是否编译代码框内的代码 highlight = TRUE, #是否语法高亮 warning = FALSE, # 是否显示警告 message = FALSE, # 是否显示信息 fig.width = 7, # 图形宽度 fig.height = 5 # 图形高度 ) Notice：局部参数设置优先级大于全局参数设置。 16.6 在vscode中编辑rmarkdown 大部分程序猿或者攻城狮应该都会对vscode比较熟悉，它提供了R Extension for Visual Studio Code，你可以在vscode中调用R对文档进行编译与修改，vscode相较于Rstudio最大的优势是可以直连GitHub，你可以将你创建的rmarkdown文件上传到GitHub，放置在你创建的GitHub主页中，使其成为一个个人主页/博客，从而在网络上展现出来，并可以被人检索到。 16.6.1 安装R extension 请打开vscode后看最左边的导航栏，选择EXTENSIONS后再search框中搜索R， 然后选择install。 Rextension 16.6.2 安装其他的软件 当你使用vscode提供的插件时，肯定无法和专门适配R的Rstudio的各项功能比较，如果你需要生成PDF文档，你可能会遇到无法完成编译的问题，这是由于渲染R Markdown文档时，需要使用至少版本1.12.3的Pandoc。 [VSC-R] index.Rmd process started ==&gt; rmarkdown::render_site(&#39;/Users/uesrname/uesrname.github.io/index.Rmd&#39;) Error: pandoc version 1.12.3 or higher is required and was not found (see the help page ?rmarkdown::pandoc_available). In addition: Warning message: In verify_rstudio_version() : Please install or upgrade Pandoc to at least version 1.17.2; or if you are using RStudio, you can just install RStudio 1.0+. Execution halted 16.6.2.1 安装Pandoc 针对上述的问题，你可能需要安装Pandoc这个软件，你可以在Pandoc官网了解相关信息和下载你需要的版本。 如果你是Windows用户，请进入pandoc’s download page后下载安装包，然后进行安装。 如果你是Mac用户，一样可以进入pandoc’s download page后下载安装包；当你的电脑中已经安装有homebrew时，你可以选择在终端输入brew install pandoc来安装Pandoc。 16.6.2.2 检查Pandoc路径： 安装完Pandoc后，确保系统中可以访问到Pandoc的可执行文件。 你可以通过在终端中运行which pandoc来检查Pandoc的安装路径。 16.6.2.3 指定Pandoc路径： 如果系统中有多个版本的Pandoc，你可以在R Markdown文档中使用rmarkdown::render()函数的pandoc参数来指定Pandoc的路径。 例如：rmarkdown::render(\"index.Rmd\", pandoc=\"/path/to/pandoc\") 一般来说，当你安装好Pandoc之后，在进入vscode进行编译后会正确生成.html文件，具体信息需要看vscode的output内容。当我进行编译后，output给出如下信息： Output created: docs/index.html Output created: /Users/username/username.github.io/docs/index.html &lt;&lt;&lt;vsc&gt;&gt;&gt;docs/index.html&lt;&lt;&lt;vsc&gt;&gt;&gt; [VSC-R] index.Rmd process exited with exit code null 如果出现上述信息则表示生成了正确的index.html文件，打开文件夹，选定该文件双击在浏览器打开进行查看。 如果你使用RStudio，可以在RStudio项目设置中指定Pandoc路径（一般不需要进行指定，因为Rstudio生成PDF是通过LaTeX）： 打开RStudio，进入你项目的工作目录。 点击菜单栏中的 “Tools” -&gt; “Global Options” -&gt; “Sweave”。 在 “Sweave” 设置中，可以指定Pandoc路径。 16.7 与Rmarkdown的缘分 有很多方法制作一个学术主页/网站，我是过很多办法，最开始是使用gridea，那还是大二的故事，看见一个朋友搭建了一夜主页，我很好奇，也觉得很好玩（其实是逼格很高），我就觉得我也得来一个，奈何不是学计算机的，很多原理都没搞明白，网络问题也是很棘手，弄着弄着就没兴趣了，然后荒废了，当时也确实没什么东西可以写，纯粹就是为了装逼而装逼。 后来到了大四的时候，我看到Academic page，我就又觉得我行了，结果还是史无前例的大坑啊！因为这个网页的搭建是使用jerkll来生成静态网页，需要本地对其进行渲染然后在Internet中显示，我前期只是修改了一些信息然后就将其放置在GitHub上，然后在腾讯云租用了一个域名，将其关联（其实22年租用了域名以后，一直没搞好，专业知识太匮乏，没得办法~）。 关于这个坑啊，有时间再专门写一个post来讲~ 后来学习准备二战，学着学着其实有点无聊，你懂吧~ 就是啥都可以弄一弄，但是就是对专业课没有心思了，所以吧，我捉摸着学一学R，然后就一发不可收拾啊，又让我发现了Rmarkdown这个好东西，嘿嘿，用来做笔记其实挺爽的，刚好卫生统计学有不少公式和图标，都可以不错的解决~ 这里就不是不说一下另外几个硬货的优缺点了，敲黑板··· MSOFFICE：微软的办公套装，Word没啥不好，就是公式难得处理，还是文本格式比较难以管控，一不小心就是划勒巴子散架了，成也灵活，败也灵活。 LaTeX：这个东西也是花了我很多时间去学的，特别是大一大二的时候，被高数老师说的数学建模比赛迷得七荤八素，然后高数老师在大一的寒假带着我们学习\\(LaTeX\\)这个啊，说我们先学会这个，其他的等开学了我再教，结果啊，碰上疫情，吹了，数学课题组没人管这个了，那好吧，我就自己玩。\\(LaTeX\\)就是很规矩，很硬，一板一眼，有自己独特的一套逻辑与美感，成也规矩，败也规矩。 Ramrkdown：受益于xieyihui的杰出构想与操作，将markdown、LaTeX与html结合起来，将markdown的轻量化与简洁同\\(LaTeX\\)的规矩与公式显示结合起来，再结合R对数据数据与分析的强大能力，形成了现在的Rmarkdown。 16.8 关于引用 原设置是： `r if (knitr::is_html_output()) &#39; # References {-} &#39; "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
